<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>QUnit Example</title>
  <link rel="stylesheet" href="qunit.css">
</head>
<body>
<div id="qunit"></div>
<script src="qunit.js"></script>
<script>
  // loading sequence test vars
  var pv_init_order = [], j = 0;
  setTimeout(function () {
    pv_init_order.push( k ); // 4. "foo"
  },10); // 4. "foo"
  // tally all global variables
  var globals = {};
  (function(){
    for (var i in window) { globals[i] = true; }
  })();
</script>
<script src="../protovis.js"></script>
<div style="display:none;">
<script type="text/javascript+protovis">
  new pv.Panel()
      .width( 100 )
      .height( 100 )
    .add(pv.Bar)
      .fillStyle("green")
      .strokeStyle("black")
      .lineWidth(10)
    .root.render();
</script>
<script type="text/javascript+protovis">
  pv_init_order.push( typeof i ); // 1. "undefined"
  pv_init_order.push( typeof j ); // 2. "number"
  if (j++ < 10) i = 0; // should not cause script to repeat
</script>
<script type="text/javascript+protovis">
  var k = "foo";
</script>
<script type="text/javascript+protovis">
  pv_init_order.push( typeof k ); // 3. "string"
</script>
</div>
<script>
  var pv_globals_defined = [];
  globals.pv_globals_defined = true;
  (function () { 
    for (var i in window) {
      if ( !globals[i] ) {
        pv_globals_defined.push(i);
      }
    }
  })();
  test("init/load tests", function () {
    deepEqual( pv_globals_defined, [ "pv" ], "globals defined" );
    deepEqual( pv_init_order, ["undefined", "number", "string", "foo"], "init order" );
  });
</script>
<script src="test-core.js"></script>
<script src="test-formatting.js"></script>

</body>
</html>
