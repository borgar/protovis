test("pv.Format.number", function () {

  ok( typeof pv.Format.number === 'function', 'pv.Format.number is a function' );

  strictEqual( pv.Format.number()(1), "1", "1" );
  strictEqual( pv.Format.number()(0), "0", "0" );
  strictEqual( pv.Format.number()(-.5), "\u22121", "-.5" );
  strictEqual( pv.Format.number()(-.6), "\u22121", "-.6" );
  strictEqual( pv.Format.number().symmetricRounding(false)(-.5), "0", "-.5" );
  strictEqual( pv.Format.number().symmetricRounding(false)(-.6), "\u22121", "-.6" );
  strictEqual( pv.Format.number()(-1), "\u22121", "-1" );
  strictEqual( pv.Format.number().negativeAffix("(", ")").integerDigits(2)(-1), "(01)", "-1" );
  strictEqual( pv.Format.number().negativeAffix("(", ")").fractionDigits(2)(-1.5), "(1.50)", "-1.5" );
  strictEqual( pv.Format.number().integerDigits(2)(-1), "\u221201", "-1" );
  strictEqual( pv.Format.number()(NaN), "NaN", "NaN" );
  strictEqual( pv.Format.number()(1234.56), "1,235", "1234.56" );
  strictEqual( pv.Format.number().fractionDigits(2)(12345678.90), "12,345,678.90", "12345678.90" );
  strictEqual( pv.Format.number().fractionDigits(0, Infinity)(12345678.90), "12,345,678.9", "12345678.90" );
  strictEqual( pv.Format.number().fractionDigits(0, Infinity)(123456789.01), "123,456,789.01", "123456789.01" );
  strictEqual( pv.Format.number().group(" ").decimal(",").fractionDigits(2)(12345678.90), "12 345 678,90", "12345678.90" );
  strictEqual( pv.Format.number().integerDigits(2).fractionDigits(2)(999.9949), "99.99", "999.9949" );
  strictEqual( pv.Format.number().integerDigits(5).integerPad("0").fractionDigits(2)(4999.9), "04,999.90", "4999.9" );
  strictEqual( pv.Format.number().integerDigits(5).integerPad(" ").fractionDigits(2)(4999.9), " 4,999.90", "4999.9" );

  strictEqual( pv.Format.number().integerDigits(2).parse(999.9949), 100, "999.9949" );
  strictEqual( pv.Format.number().parse(999.9949), 1000, "999.9949" );

});
test("pv.Format.date: format", function () {

  ok( typeof pv.Format.date === 'function', 'pv.Format.date is a function' );

  var d1 = new Date( Date.UTC( 2001, 2, 10, 17, 16, 18, 13 ) );
  var d2 = new Date( Date.UTC( 2006, 7, 10, 15, 5, 8, 123 ) );
  var d3 = new Date( Date.UTC( 1961, 0, 3, 1, 51, 10, 1 ) );

  strictEqual( pv.Format.date("%B %e, %Y, %l:%M %P")(d1), "March 10, 2001, 5:16 pm", "%B %e, %Y, %l:%M %P" );
  strictEqual( pv.Format.date("%m.%d.%y")(d1), "03.10.01", "%m.%d.%y" );
  strictEqual( pv.Format.date("%e, %m, %Y")(d1), "10, 03, 2001", "%e, %m, %Y" );
  strictEqual( pv.Format.date("%Y%m%d")(d1), "20010310", "%Y%m%d" );
  strictEqual( pv.Format.date("%I-%M-%S, %e-%m-%y, it is %w Day")(d1), "05-16-18, 10-03-01, it is 6 Day", "%I-%M-%S, %e-%m-%y, it is %w Day" );
  strictEqual( pv.Format.date("%a %b %e %H:%M:%S %Z %Y")(d1), "Sat Mar 10 17:16:18 UTC 2001", "%a %b %e %H:%M:%S %Z %Y" );
  strictEqual( pv.Format.date("%H:%M:%S")(d1), "17:16:18", "%H:%M:%S" );
  strictEqual( pv.Format.date("%d")(d2), "10", "%d" );
  strictEqual( pv.Format.date("%a")(d2), "Thu", "%a" );
  strictEqual( pv.Format.date("%e")(d2), "10", "%e" );
  strictEqual( pv.Format.date("%A")(d2), "Thursday", "%A" );
  strictEqual( pv.Format.date("%u")(d2), "4", "%u" );
  strictEqual( pv.Format.date("%w")(d2), "4", "%w" );
  strictEqual( pv.Format.date("%j")(d2), "222", "%j" );
  strictEqual( pv.Format.date("%V")(d2), "32", "%V" );
  strictEqual( pv.Format.date("%B")(d2), "August", "%B" );
  strictEqual( pv.Format.date("%m")(d2), "08", "%m" );
  strictEqual( pv.Format.date("%b")(d2), "Aug", "%b" );
  strictEqual( pv.Format.date("%h")(d2), "Aug", "%h" );
  strictEqual( pv.Format.date("%G")(d2), "2006", "%G" );
  strictEqual( pv.Format.date("%Y")(d2), "2006", "%Y" );
  strictEqual( pv.Format.date("%y")(d2), "06", "%y" );
  strictEqual( pv.Format.date("%P")(d2), "pm", "%P" );
  strictEqual( pv.Format.date("%p")(d2), "PM", "%p" );
  strictEqual( pv.Format.date("%l")(d2), "3", "%l" );
  strictEqual( pv.Format.date("%I")(d2), "03", "%I" );
  strictEqual( pv.Format.date("%H")(d2), "15", "%H" );
  strictEqual( pv.Format.date("%M")(d2), "05", "%M" );
  strictEqual( pv.Format.date("%S")(d2), "08", "%S" );
  strictEqual( pv.Format.date("%f")(d2), "123", "%f" );
  strictEqual( pv.Format.date("%Z")(d2), "UTC", "%Z" );
  strictEqual( pv.Format.date("%z")(d2), "+0000", "%z" );
  strictEqual( pv.Format.date("%Y-%m-%dT%H:%M:%S.%f%z")(d2), "2006-08-10T15:05:08.123+0000", "%Y-%m-%dT%H:%M:%S.%f%z" );
  strictEqual( pv.Format.date("%a, %e %b %Y %H:%M:%S %z")(d2), "Thu, 10 Aug 2006 15:05:08 +0000", "%a, %e %b %Y %H:%M:%S %z" );
  strictEqual( pv.Format.date("%s")(d2), "1155222308", "%s" );
  strictEqual( pv.Format.date("%d")(d3), "03", "%d" );
  strictEqual( pv.Format.date("%a")(d3), "Tue", "%a" );
  strictEqual( pv.Format.date("%e")(d3), " 3", "%e" );
  strictEqual( pv.Format.date("%A")(d3), "Tuesday", "%A" );
  strictEqual( pv.Format.date("%u")(d3), "2", "%u" );
  strictEqual( pv.Format.date("%w")(d3), "2", "%w" );
  strictEqual( pv.Format.date("%j")(d3), "003", "%j" );
  strictEqual( pv.Format.date("%V")(d3), "01", "%V" );
  strictEqual( pv.Format.date("%B")(d3), "January", "%B" );
  strictEqual( pv.Format.date("%m")(d3), "01", "%m" );
  strictEqual( pv.Format.date("%b")(d3), "Jan", "%b" );
  strictEqual( pv.Format.date("%G")(d3), "1961", "%G" );
  strictEqual( pv.Format.date("%Y")(d3), "1961", "%Y" );
  strictEqual( pv.Format.date("%y")(d3), "61", "%y" );
  strictEqual( pv.Format.date("%P")(d3), "am", "%P" );
  strictEqual( pv.Format.date("%p")(d3), "AM", "%p" );
  strictEqual( pv.Format.date("%l")(d3), "1", "%l" );
  strictEqual( pv.Format.date("%I")(d3), "01", "%I" );
  strictEqual( pv.Format.date("%H")(d3), "01", "%H" );
  strictEqual( pv.Format.date("%M")(d3), "51", "%M" );
  strictEqual( pv.Format.date("%S")(d3), "10", "%S" );
  strictEqual( pv.Format.date("%f")(d3), "001", "%f" );
  strictEqual( pv.Format.date("%Z")(d3), "UTC", "%Z" );
  strictEqual( pv.Format.date("%z")(d3), "+0000", "%z" );
  strictEqual( pv.Format.date("%Y-%m-%dT%H:%M:%S.%f%z")(d3), "1961-01-03T01:51:10.001+0000", "%Y-%m-%dT%H:%M:%S.%f%z" );
  strictEqual( pv.Format.date("%a, %d %b %Y %H:%M:%S %z")(d3), "Tue, 03 Jan 1961 01:51:10 +0000", "%a, %d %b %Y %H:%M:%S %z" );
  strictEqual( pv.Format.date("%s")(d3), "-283817329", "%s" );
  strictEqual( pv.Format.date("%G-W%V-%u")(new Date(2005, 0, 1)), "2004-W53-6", "%G-W%V-%u" );
  strictEqual( pv.Format.date("%G-W%V-%u")(new Date(2005, 0, 2)), "2004-W53-7", "%G-W%V-%u" );
  strictEqual( pv.Format.date("%G-W%V-%u")(new Date(2005,11,31)), "2005-W52-6", "%G-W%V-%u" );
  strictEqual( pv.Format.date("%G-W%V-%u")(new Date(2007, 0, 1)), "2007-W01-1", "%G-W%V-%u" );
  strictEqual( pv.Format.date("%G-W%V-%u")(new Date(2007,11,30)), "2007-W52-7", "%G-W%V-%u" );
  strictEqual( pv.Format.date("%G-W%V-%u")(new Date(2007,11,31)), "2008-W01-1", "%G-W%V-%u" );
  strictEqual( pv.Format.date("%G-W%V-%u")(new Date(2008, 0, 1)), "2008-W01-2", "%G-W%V-%u" );
  strictEqual( pv.Format.date("%G-W%V-%u")(new Date(2008,11,29)), "2009-W01-1", "%G-W%V-%u" );
  strictEqual( pv.Format.date("%G-W%V-%u")(new Date(2008,11,31)), "2009-W01-3", "%G-W%V-%u" );
  strictEqual( pv.Format.date("%G-W%V-%u")(new Date(2009, 0, 1)), "2009-W01-4", "%G-W%V-%u" );
  strictEqual( pv.Format.date("%G-W%V-%u")(new Date(2009,11,31)), "2009-W53-4", "%G-W%V-%u" );
  strictEqual( pv.Format.date("%G-W%V-%u")(new Date(2010, 0, 3)), "2009-W53-7", "%G-W%V-%u" );
  strictEqual( pv.Format.date("%G-W%V-%u")(new Date(2009,11,31)), "2009-W53-4", "%G-W%V-%u" );
  strictEqual( pv.Format.date("%G-W%V-%u")(new Date(2010, 0, 1)), "2009-W53-5", "%G-W%V-%u" );
  strictEqual( pv.Format.date("%G-W%V-%u")(new Date(2010, 0, 2)), "2009-W53-6", "%G-W%V-%u" );
  strictEqual( pv.Format.date("%G-W%V-%u")(new Date(2010, 0, 3)), "2009-W53-7", "%G-W%V-%u" );
  strictEqual( pv.Format.date("%G-W%V-%u")(new Date(2008,11,28)), "2008-W52-7", "%G-W%V-%u" );
  strictEqual( pv.Format.date("%G-W%V-%u")(new Date(2008,11,29)), "2009-W01-1", "%G-W%V-%u" );
  strictEqual( pv.Format.date("%G-W%V-%u")(new Date(2008,11,30)), "2009-W01-2", "%G-W%V-%u" );
  strictEqual( pv.Format.date("%G-W%V-%u")(new Date(2008,11,31)), "2009-W01-3", "%G-W%V-%u" );
  strictEqual( pv.Format.date("%G-W%V-%u")(new Date(2009, 0, 1)), "2009-W01-4", "%G-W%V-%u" );
  strictEqual( pv.Format.date("%YQ%q")(new Date(1262304000000)), "2010Q1", "%YQ%q" );
  strictEqual( pv.Format.date("%YQ%q")(new Date(1270080000000)), "2010Q2", "%YQ%q" );
  strictEqual( pv.Format.date("%YQ%q")(new Date(1277942400000)), "2010Q3", "%YQ%q" );
  strictEqual( pv.Format.date("%YQ%q")(new Date(1285891200000)), "2010Q4", "%YQ%q" );
  strictEqual( pv.Format.date("%Y-%j")(new Date(2001,7,10)), "2001-222", "%Y-%j" );

});
test("pv.Format.date: parse", function () {

  ok( typeof pv.Format.date("%Y").parse === 'function', 'pv.Format.date("%Y").parse is a function' );

  var d1 = new Date( Date.UTC( 2001, 2, 10, 17, 16, 18, 13 ) );
  var d2 = new Date( Date.UTC( 2006, 7, 10, 15, 5, 8, 123 ) );
  var d3 = new Date( Date.UTC( 1961, 0, 3, 1, 51, 10, 1 ) );

  equal( pv.Format.date("%B %e, %Y, %l:%M %P").parse("March 10, 2001, 5:16 pm") * 1, new Date( 984244560000) * 1, "%B %e, %Y, %l:%M %P" );
  equal( pv.Format.date("%m.%d.%y").parse("03.10.01") * 1, new Date( 984182400000) * 1, "%m.%d.%y" );
  equal( pv.Format.date("%e, %m, %Y").parse("10, 03, 2001") * 1, new Date( 984182400000) * 1, "%e, %m, %Y" );
  equal( pv.Format.date("%Y%m%d").parse("20010310") * 1, new Date( 984182400000) * 1, "%Y%m%d" );
  equal( pv.Format.date("%I-%M-%S, %e-%m-%y, it is %w Day").parse("05-16-18, 10-03-01, it is 6 Day") * 1, new Date( 984201378000) * 1, "%I-%M-%S, %e-%m-%y, it is %w Day" );
  equal( pv.Format.date("%a %b %e %H:%M:%S %Z %Y").parse("Sat Mar 10 17:16:18 UTC 2001") * 1, new Date( 984244578000) * 1, "%a %b %e %H:%M:%S %Z %Y" );
  equal( pv.Format.date("%Y-%m-%dT%H:%M:%S.%f%z").parse("2006-08-10T15:05:08.123+0000") * 1, d2 * 1, "%Y-%m-%dT%H:%M:%S.%f%z" );
  equal( pv.Format.date("%a, %e %b %Y %H:%M:%S %z").parse("Thu, 10 Aug 2006 15:05:08 +0000") * 1, new Date(1155222308000) * 1, "%a, %e %b %Y %H:%M:%S %z" );
  equal( pv.Format.date("%s").parse("1155222308") * 1, new Date(1155222308000) * 1, "%s" );
  equal( pv.Format.date("%Y-%m-%dT%H:%M:%S.%f%z").parse("1961-01-03T01:51:10.001+0000") * 1, d3 * 1, "%Y-%m-%dT%H:%M:%S.%f%z" );
  equal( pv.Format.date("%a, %d %b %Y %H:%M:%S %z").parse("Tue, 03 Jan 1961 01:51:10 +0000") * 1, new Date(-283817330000) * 1, "%a, %d %b %Y %H:%M:%S %z" );
  equal( pv.Format.date("%s").parse("-283817329") * 1, new Date(-283817329000) * 1, "%s" );
  equal( pv.Format.date("%Y-%m-%dT%H:%M:%S.%f%z").parse("2011-06-23T13:26:56.204110Z") * 1, new Date(1308835616204) * 1, "%Y-%m-%dT%H:%M:%S.%f%z" );
  equal( pv.Format.date("%Y-%B-%e").parse("2011-August-23") * 1, new Date(2011,7,23) * 1, "%Y-%B-%e" );
  equal( pv.Format.date("%G-W%V").parse("2009-W52") * 1, new Date(1261353600000) * 1, "%G-W%V" );
  equal( pv.Format.date("%G-W%V").parse("2010-W01") * 1, new Date(1262563200000) * 1, "%G-W%V" );
  equal( pv.Format.date("%G-W%V").parse("1998-W53") * 1, new Date( 914803200000) * 1, "%G-W%V" );
  equal( pv.Format.date("%G-W%V").parse("1908-W01") * 1, new Date(-1956787200000) * 1, "%G-W%V" );
  equal( pv.Format.date("%G-W%V-%u").parse("1908-W01-4") * 1, new Date(-1956528000000) * 1, "%G-W%V-%u" );
  equal( pv.Format.date("%G-W%V-%u %H:%M:%S").parse("1908-W01-4 23:59:59") * 1, new Date(-1956441601000) * 1, "%G-W%V-%u %H:%M:%S" );
  equal( pv.Format.date("%G-W%V-%u").parse("2004-W53-6") * 1, new Date(2005, 0, 1) * 1, "%G-W%V-%u" );
  equal( pv.Format.date("%G-W%V-%u").parse("2004-W53-7") * 1, new Date(2005, 0, 2) * 1, "%G-W%V-%u" );
  equal( pv.Format.date("%G-W%V-%u").parse("2005-W52-6") * 1, new Date(2005,11,31) * 1, "%G-W%V-%u" );
  equal( pv.Format.date("%G-W%V-%u").parse("2007-W01-1") * 1, new Date(2007, 0, 1) * 1, "%G-W%V-%u" );
  equal( pv.Format.date("%G-W%V-%u").parse("2007-W52-7") * 1, new Date(2007,11,30) * 1, "%G-W%V-%u" );
  equal( pv.Format.date("%G-W%V-%u").parse("2008-W01-1") * 1, new Date(2007,11,31) * 1, "%G-W%V-%u" );
  equal( pv.Format.date("%G-W%V-%u").parse("2008-W01-2") * 1, new Date(2008, 0, 1) * 1, "%G-W%V-%u" );
  equal( pv.Format.date("%G-W%V-%u").parse("2009-W01-1") * 1, new Date(2008,11,29) * 1, "%G-W%V-%u" );
  equal( pv.Format.date("%G-W%V-%u").parse("2009-W01-3") * 1, new Date(2008,11,31) * 1, "%G-W%V-%u" );
  equal( pv.Format.date("%G-W%V-%u").parse("2009-W01-4") * 1, new Date(2009, 0, 1) * 1, "%G-W%V-%u" );
  equal( pv.Format.date("%G-W%V-%u").parse("2009-W53-4") * 1, new Date(2009,11,31) * 1, "%G-W%V-%u" );
  equal( pv.Format.date("%G-W%V-%u").parse("2009-W53-7") * 1, new Date(2010, 0, 3) * 1, "%G-W%V-%u" );
  equal( pv.Format.date("%G-W%V-%u").parse("2009-W53-4") * 1, new Date(2009,11,31) * 1, "%G-W%V-%u" );
  equal( pv.Format.date("%G-W%V-%u").parse("2009-W53-5") * 1, new Date(2010, 0, 1) * 1, "%G-W%V-%u" );
  equal( pv.Format.date("%G-W%V-%u").parse("2009-W53-6") * 1, new Date(2010, 0, 2) * 1, "%G-W%V-%u" );
  equal( pv.Format.date("%G-W%V-%u").parse("2009-W53-7") * 1, new Date(2010, 0, 3) * 1, "%G-W%V-%u" );
  equal( pv.Format.date("%G-W%V-%u").parse("2008-W52-7") * 1, new Date(2008,11,28) * 1, "%G-W%V-%u" );
  equal( pv.Format.date("%G-W%V-%u").parse("2009-W01-1") * 1, new Date(2008,11,29) * 1, "%G-W%V-%u" );
  equal( pv.Format.date("%G-W%V-%u").parse("2009-W01-2") * 1, new Date(2008,11,30) * 1, "%G-W%V-%u" );
  equal( pv.Format.date("%G-W%V-%u").parse("2009-W01-3") * 1, new Date(2008,11,31) * 1, "%G-W%V-%u" );
  equal( pv.Format.date("%G-W%V-%u").parse("2009-W01-4") * 1, new Date(2009, 0, 1) * 1, "%G-W%V-%u" );
  equal( pv.Format.date("%YQ%q").parse("2010Q1") * 1, new Date(1262304000000) * 1, "%YQ%q" );
  equal( pv.Format.date("%YQ%q").parse("2010Q2") * 1, new Date(1270080000000) * 1, "%YQ%q" );
  equal( pv.Format.date("%YQ%q").parse("2010Q3") * 1, new Date(1277942400000) * 1, "%YQ%q" );
  equal( pv.Format.date("%YQ%q").parse("2010Q4") * 1, new Date(1285891200000) * 1, "%YQ%q" );
  equal( pv.Format.date("%Y-%j").parse("2001-222") * 1, new Date(2001,7,10) * 1, "%Y-%j" );

});
